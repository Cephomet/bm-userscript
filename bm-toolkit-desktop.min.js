// ==UserScript==
// @name Battlemetrics Toolkit - Desktop (Auto Update)
// @namespace https://www.battlemetrics.com/
// @version 6.7
// @updateURL "https://raw.githubusercontent.com/TempusOwl/bm-userscript/main/bm-toolkit-desktop.js"
// @downloadURL "https://raw.githubusercontent.com/TempusOwl/bm-userscript/main/bm-toolkit-desktop.js"
// @description Modifies the rcon panel for battlemetrics to help color code important events and details about players.
// @author TempusOwl
// @match https://www.battlemetrics.com/*
// @match https://www.battlemetrics.com
// @icon https://www.google.com/s2/favicons?sz=64&domain=battlemetrics.com
// @grant GM_addStyle
// @run-at document-end
// ==/UserScript==
let b,i=!1;setInterval(function(){const e=["team killed"],t=["AFK - Thanks for playing!","Please get a Squad Leader kit within 8 mins","Final warning: Get Squad Leader kit within 5m","SEEDING WHITELIST ACTIVE! Thanks for helping seed the server!","You will be kicked in 2 minutes if you are still not in a squad","To switch teams, please run the","Check your seeding reward status via","Trigger added flag LiQ Seeder"],n=["[SL Kit]"],o=["left the server"],l=["joined the server"],s=["was warned","was kicked","was banned","edited BattleMetrics Ban","added BattleMetrics Ban","deleted BattleMetrics Ban","Trigger added flag Previously banned"],r=["ANGEL_42","Aomm2025","Basa_Doc","Brennan","budge","Chaot3ch","Cossack_440","DontFaket","E10","eatcho","El 24 throttle4u","Exploits","Gilly","got2bhockey","JAMESTERRARIA","Jonboy","Kibz","Mav","Mike.H","Nightshade","Outlast","QTheEngineer","Redneck","Shaka","Skipper","Sticker","TempusOwl","Tiberius","Too Many Cooks","Valkyrie","Wolf Fang","Zimmy - 75","Î˜scar Mike"],c=["Archangel","Blackout","Digikind","iCampHard","Kyle","MURICA","Nova","WatdaHek","WadeLovesWhiteWomen","Whip me more, Grandma","xplay0321"],d=["Australian Defence Force","British Army","British Armed Forces","Canadian Army","Canadian Armed Forces","United States Army","United States Marine Corps"],a=["Russian Ground Forces","Middle Eastern Alliance","Insurgent Forces","Irregular Militia Forces","People's Liberation Army","Russian Airborne Forces","PLA Navy Marine Corps"],u=["admin","Admin","ADMIN","aDMIN","to the other team.",") was disbanded b","requested a list of squads.","requested a list of squads.","set the next map to","changed the map to","requested the next map.",") forced","(Global)","requested the current map.","restarted the match.","was removed from their squad by Trigger.","requested layer list.","was removed from their squad by"];let y=document.querySelectorAll(".css-mjpog7"),m=document.querySelectorAll(".css-zwebxb"),p=document.querySelectorAll(".css-ym7lu8"),f=document.querySelectorAll(".css-18s4qom"),g=document.querySelectorAll(".css-4ey69y"),h=document.querySelectorAll(".modal-title"),x=document.querySelectorAll(".css-yun63y a, .css-yun63y button"),C=document.querySelectorAll(".css-f5o5h6 a, .css-f5o5h6 button"),k=document.querySelectorAll(".css-yun63y a, .css-yun63y button");for(b=h,i=0;i<b.length;i++)b[i].textContent.includes("Change Layer")?(b[i].style.color="red",b[i].style.fontStyle="bold",b[i].style.textAlign="center",b[i].style.fontSize="200pt"):b[i].textContent.includes("Set Next Layer")?(b[i].style.color="lime",b[i].style.fontStyle="bold",b[i].style.textAlign="center",b[i].style.fontSize="24pt"):b[i].textContent.includes("Kick")?(b[i].style.color="orange",b[i].style.fontStyle="bold",b[i].style.textAlign="center",b[i].style.fontSize="48pt"):b[i].textContent.includes("Warn")&&(b[i].style.color="lime",b[i].style.fontStyle="bold",b[i].style.textAlign="center",b[i].style.fontSize="24pt");for(b=g,i=0;i<b.length;i++)b[i].textContent.includes("Arma")?b[i].style.background="#333300":b[i].textContent.includes("Squad Mod")?b[i].style.background="#2b9937":b[i].textContent.includes("Comp")?b[i].style.background="lime":b[i].textContent.includes("Squad Admin")?b[i].style.background="#119ab7":b[i].textContent.includes("Rust Admin")?b[i].style.background="#672c00":b[i].textContent.includes("Admin")?(b[i].style.background="yellow",b[i].style.color="black"):b[i].textContent.includes("Org")?b[i].style.background="black":b[i].textContent.includes("Recruiter")?b[i].style.background="#cc6600":b[i].textContent.includes("Squad Event")&&(b[i].style.background="#660033");for(b=x,i=0;i<b.length;i++)b[i].textContent.includes("Next Layer")?(b[i].style.color="lime",b[i].style.fontSize="16pt"):b[i].textContent.includes("Change Layer")?(b[i].style.color="red",b[i].style.fontStyle="bold",b[i].style.fontSize="8pt"):b[i].textContent.includes("Squad List")&&(b[i].style.color="gold",b[i].style.fontSize="16pt");for(b=C,i=0;i<b.length;i++)b[i].textContent.includes("Warn")?b[i].style.color="lime":b[i].textContent.includes("Squad List")?b[i].style.color="gold":b[i].textContent.includes("Kick")?b[i].style.color="orange":b[i].textContent.includes("Ban")&&(b[i].style.color="red");for(b=k,i=0;i<b.length;i++)b[i].textContent.includes("Warn")?b[i].style.color="lime":b[i].textContent.includes("Squad List")?b[i].style.color="gold":b[i].textContent.includes("Kick")?b[i].style.color="orange":b[i].textContent.includes("Ban")&&(b[i].style.color="red");for(p.forEach(i=>{u.some(e=>i.textContent.includes(e))?i.style.color="#37ff00":t.some(e=>i.textContent.includes(e))?i.style.color="#919191":l.some(e=>i.textContent.includes(e))?i.style.color="#919191":o.some(e=>i.textContent.includes(e))?i.style.color="#ff33cc":s.some(e=>i.textContent.includes(e))?i.style.color="#ff3333":d.some(e=>i.textContent.includes(e))?i.style.color="#e7a600":a.some(e=>i.textContent.includes(e))?i.style.color="rgb(217,86,39)":e.some(e=>i.textContent.includes(e))?(i.style.color="#ffcc00",i.style.fontSize="medium"):n.some(e=>i.textContent.includes(e))&&(i.style.color="#FF931A")}),m.forEach(e=>{r.some(t=>e.textContent.includes(t))?e.style.color="#00fff7":c.some(t=>e.textContent.includes(t))&&(e.style.color="#4cffac")}),b=f,i=0;i<b.length;i++)b[i].textContent.includes("Admin")&&(b[i].style.color="#58ff47");for(y.forEach(e=>{r.some(t=>e.textContent.includes(t))?e.style.color="#00fff7":c.some(t=>e.textContent.includes(t))&&(e.style.color="#4cffac")}),b=document.getElementsByClassName("small text-muted"),i=0;i<b.length;i++)"Squad Leader"==b[i].innerText&&(b[i].style.color="#ffba23");document.querySelectorAll(".css-z1s6qn").forEach(e=>{let t=e.getAttribute("datetime"),n=new Date(t).toLocaleString().split(" ");e.textContent=e.textContent.replace(e.textContent.toString(),(n[1]+" "+n[2]).toString())})},35),setTimeout(function(){GM_addStyle("html body div#root div.css-0.e1f2e1y80 div#RCONLayout.css-1qipodg nav.css-19lifo3 ul.css-16xvbhm li.css-1nxi32t a img#poweredbyovh {background-color: #31e3ff21;width: 1920px}"),GM_addStyle(".css-1tuqie1 {background-color: #5600ff1a;width: 1920px}"),GM_addStyle(".css-1rwnm41 {background-color: #ff000008;width: 1920px; z-index: 2;}"),GM_addStyle(".css-1fy5con {background-color: #31e3ff21;width: 1920px}"),GM_addStyle(".css-ym7lu8 {z-index: 2;}"),GM_addStyle(".css-z1s6qn {z-index: 3;}");let e=document.createElement("input");e.setAttribute("type","button"),e.id="map",e.setAttribute("value","TW"),e.setAttribute("onclick","window.open('https://www.battlemetrics.com/rcon/servers/7894269', '_self')"),e.style="top:10px;right:12%;width:35px;background:#222222;position:absolute;z-index:99999;padding:2px;background: #FF9900;",e.setAttribute("id","twr"),document.body.appendChild(e);let t=document.createElement("input");t.setAttribute("type","button"),t.id="map",t.setAttribute("value","NP"),t.setAttribute("onclick","window.open('https://www.battlemetrics.com/rcon/servers/7871746', '_self')"),t.style="top:10px;right:14%;width:35px;background:#222222;position:absolute;z-index:99999;padding:2px;background: #187E00;",t.setAttribute("id","twr"),document.body.appendChild(t);let n=document.createElement("input");n.setAttribute("type","button"),n.id="map",n.setAttribute("value","B"),n.setAttribute("onclick","window.open('https://www.battlemetrics.com/rcon/bans?filter%5Borganization%5D=17085', '_blank')"),n.style="top:10px;right:18%;width:35px;background:#222222;position:absolute;z-index:99999;padding:2px;background: rgb(47 50 66);",n.setAttribute("target","_blank"),n.setAttribute("id","ban"),document.body.appendChild(n);let o=document.createElement("input");o.setAttribute("type","button"),o.id="map",o.setAttribute("value","L"),o.setAttribute("onclick","window.open('https://squadlanes.com/', '_blank')"),o.style="top:10px;right:20%;width:35px;background:#222222;position:absolute;z-index:99999;padding:2px;background: #7E6900;",o.setAttribute("target","_blank"),o.setAttribute("id","lanes"),document.body.appendChild(o)},250),setInterval(function(){String.prototype.startsWith=function(e){return this.match("^"+e)==e};let e=document.createElement("Button"),t=document.querySelectorAll('[title*="765"]')[0].innerText,n=document.querySelectorAll("#RCONPlayerPage > h1")[0].innerText;e.innerHTML="Copy",e.id="copy-button",e.style="top:90px;left:0;background:#222222;position:absolute;z-index:99999;padding:6px;",document.body.appendChild(e),document.getElementById("copy-button").onclick=function(){let e=document.createElement("textarea");document.body.appendChild(e),e.value="**Offending User: **"+n+"** // **"+t+"\n**BM: **<"+window.location.href+">\n**Server:** \n**Infraction: **\n**Evidence Linked Below:**\n",e.select(),document.execCommand("copy"),e.parentNode.removeChild(e)},setTimeout(function(){document.getElementById("copy-button").remove(),document.querySelectorAll(".css-q39y9k").forEach(e=>{let t=e.title,n=document.createElement("a");[...e.attributes].forEach(e=>n.attributes.setNamedItem(e.cloneNode())),n.href=`https://communitybanlist.com/search/${t}`,n.innerHTML=t,n.target="_blank",e.replaceWith(n)})},975)},1e3),setInterval(function(){setTimeout(function(){document.querySelectorAll(".css-q39y9k").forEach(e=>{let t=e.title,n=document.createElement("a");[...e.attributes].forEach(e=>n.attributes.setNamedItem(e.cloneNode())),n.href=`https://communitybanlist.com/search/${t}`,n.innerHTML=t,n.target="_blank",e.replaceWith(n)})},275)},300);