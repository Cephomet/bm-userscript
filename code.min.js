let version="11.55",updateRate="150",colors={cTeamBluefor:"#4eacff",cTeamOpfor:"#d0b1ff",cTeamIndepend:"#fd6aff",cAdminName:"#00fff7",cbmAdmin:"#58ff47",cModAction:"#ff3333",cAdminAction:"#37ff00",cTeamKilled:"#ffcc00",cLeftServer:"#d9a6a6",cJoined:"#919191",cGrayed:"#919191",cTracked:"#FF931A",cNoteColorIcon:"#f5ccff"},styles={zShift:".css-ym7lu8 {z-index: 2;}",zShiftTime:".css-z1s6qn {z-index: 3;}",zShiftTimeDate:".css-1jtoyp {z-index: 3;}",teamkillBar:".css-1tuqie1 {background-color: #5600ff1a;width: 1920px}",adminCam:".css-1fy5con {background-color: #31e3ff21;width: 1920px}",nobranding:"#poweredbyovh {background-color: #31e3ff21;width: 1920px}"},sets={teamKilled:new Set(["team killed"]),grayedOut:new Set(["AFK - Thanks for playing!","Please get a Squad Leader kit within 8 mins","Final warning: Get Squad Leader kit within 5m","SEEDING WHITELIST ACTIVE! Thanks for helping seed the server!","You will be kicked in 2 minutes if you are still not in a squad","To switch teams, please run the","Check your seeding reward status via","Trigger added flag LiQ Seeder"]),trackedTriggers:new Set(["[SL Kit]"]),leftServer:new Set(["left the server"]),joinedServer:new Set(["joined the server"]),actionList:new Set(["was warned","was kicked","was banned","edited BattleMetrics Ban","added BattleMetrics Ban","deleted BattleMetrics Ban","Trigger added flag Previously banned"]),adminList:new Set(["Aomm2025","Archangel","Basa_Doc","Blackout","Brennan","budge","Chaot3ch","Cossack_440","Digikind","DontFaket","E10","El 24 throttle4u","Exploits","Gilly","got2bhockey","Hellsaber","iCampHard","JAMESTERRARIA","Jonboy","Kibz","Kyle","Nightshade","Outlast","QTheEngineer","Redneck","Shaka","sleepyguy1","Skipper","TempusOwl","Too Many Cooks","Valkyrie","WatdaHek","Wobblebob29","Wolf Fang","Î˜scar Mike","xplay0321","Chillz","HellHound6396","omgitsjesse","MODERNMEGA","Whip me more, Grandma","Wjli13125","Temper","MadDawgMorales","The ROMAN99","jordonrtelles","ETXBONES","Moses","N1nja","white knife"]),teamBluefor:new Set(["Australian Defence Force","British Armed Forces","Canadian Armed Forces","United States Army","United States Marine Corps","Turkish Land Forces"]),teamOpfor:new Set(["Russian Ground Forces","Middle Eastern Alliance","Middle Eastern Insurgents","Insurgent Forces","Irregular Militia Forces","People's Liberation Army","Russian Airborne Forces","PLA Navy Marine Corps","PLA Amphibious Ground Forces","Western Private Military Contractors"]),teamIndepend:new Set(["Western Private Military Contractors"]),adminTerms:new Set(["admin","Admin","ADMIN","aDMIN","to the other team.",") was disbanded b","requested a list of squads.","requested a list of squads.","set the next map to","changed the map to","requested the next map.",") forced","AdminRenameSquad","(Global)","executed Player Action Action","requested the current map.","restarted the match.","Squad disband - SL","was removed from their squad by Trigger.","requested layer list.","was removed from their squad by"])};async function runCode(){console.log("Running initial one-time code..."),Object.values({zShift:".css-ym7lu8 {z-index: 2;}",zShiftTime:".css-z1s6qn {z-index: 3;}",zShiftTimeDate:".css-1jtoyp {z-index: 3;}",teamkillBar:".css-1tuqie1 {background-color: #5600ff1a;width: 1920px}",moderationBar:".css-1rwnm41 {background-color: #ff000008;width: 1920px;}",adminCam:".css-1fy5con {background-color: #31e3ff21;width: 1920px}",nobranding:"#RCONLayout > nav > ul > li.css-1nxi32t > a {background-color: #31e3ff21;width: 1920px}"}).forEach(e=>GM_addStyle(e));{var e=[{id:"NPFbutton",label:"N",url:"",backgroundColor:"#187E00"},{id:"TRbutton",label:"T",url:"",backgroundColor:"orange"},{id:"ban",label:"B",url:"",backgroundColor:"red"},{id:"lanes",label:"M",url:"",backgroundColor:"#7E6900"},{id:"version",label:version,url:"",backgroundColor:"black",fontSize:"6pt"}];let n=Object.assign(document.createElement("div"),{style:"position: absolute; top: 10px; right: 5%; z-index: 99999;"});document.body.appendChild(n),e.forEach(({id:e,label:t,url:o,backgroundColor:r})=>{e=Object.assign(document.createElement("input"),{type:"button",id:e,value:t,style:`width: 35px; margin-right: 5px; padding: 2px; font-size: 8pt; background: ${r};`,onclick:()=>window.open(o,"_blank")});n.appendChild(e)})}let y=!1;async function t(){if(await new Promise(e=>setTimeout(e,updateRate)),document.querySelector(".ReactVirtualized__Grid__innerScrollContainerddd")||document.querySelector(".css-b7r34x")){function o(e,t){return document.querySelector(`[title*="${e}"]`)?.innerText||t}document.querySelectorAll(".css-z1s6qn").forEach(e=>{var t=e.getAttribute("datetime");t&&(t=new Date(t),isNaN(t.getTime())||e.setAttribute("title",t.toLocaleString(void 0,{timeZoneName:"short"})))}),r=document.querySelectorAll(".css-1ewh5td"),n=document.querySelectorAll(".css-fj458c"),a=document.querySelectorAll(".css-ym7lu8"),s=document.querySelectorAll(".css-18s4qom"),i=document.querySelectorAll(".css-he5ni6"),p(a,sets.adminTerms,colors.cAdminAction),p(a,sets.grayedOut,colors.cGrayed),p(a,sets.joinedServer,colors.cJoined),p(a,sets.leftServer,colors.cLeftServer),p(a,sets.actionList,colors.cModAction),p(a,sets.teamBluefor,colors.cTeamBluefor),p(a,sets.teamOpfor,colors.cTeamOpfor),p(a,sets.teamIndepend,colors.cTeamIndepend),p(a,sets.teamKilled,colors.cTeamKilled),p(a,sets.trackedTriggers,colors.cTracked),f(n,sets.adminList,colors.cAdminName),f(r,sets.adminList,colors.cAdminName),s.forEach(e=>{e.textContent.includes("Admin")&&(e.style.color=colors.cbmAdmin)}),i.forEach(e=>{e.style.color=colors.cNoteColorIcon}),document.querySelector("#RCONPlayerPage")?(d("copy-button",l),d("CBL-info",e)):(m("copy-button"),m("open-url-button"),m("CBL-info"));let c="";async function e(){if(y)console.log("CBL script already in progress... Skipping...");else{var e=o("765","SteamID MISSING?");if(e&&"SteamID MISSING?"!==e)try{y=!0;{var r=e;await new Promise(e=>setTimeout(e,500));let t=0,o=!1;for(;t<1&&!o;)try{t++,console.log(`CBL API Query ${t}: Fetching user data for SteamID `+r);var n=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                                    query Search($id: String!) {
                                        steamUser(id: $id) {
                                            riskRating
                                            activeBans: bans(orderBy: "created", orderDirection: DESC, expired: false) {
                                                edges { node { id } }
                                            }
                                            expiredBans: bans(orderBy: "created", orderDirection: DESC, expired: true) {
                                                edges { node { id } }
                                            }
                                        }
                                    }
                                `,variables:{id:r}})});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status} (${n.statusText})`);var a=await n.json();if(!a||!a.data||!a.data.steamUser)throw new Error("Invalid response format or user not found.");var s=a.data.steamUser,i=s.riskRating||"NA",l=s.activeBans.edges.length||0,d=s.expiredBans.edges.length||0;u(i,l,d),console.log("Fetch successful!"),o=!0}catch(e){console.error(`Attempt ${t} failed: `+e.message,e),t<1?(console.log("Retrying in 3 seconds..."),await new Promise(e=>setTimeout(e,3e3))):(console.error("Max retries reached. Fetch operation failed."),u("NA","NA",0),o=!0)}return void await void 0}}catch(e){console.error("Error fetching Steam user data:",e)}finally{y=!1}else console.error("Invalid Steam ID")}}function u(e,t,o){var r=document.createElement("div");r.id="CBL-info",r.style=`
                                width: 140px;
                                height: 120px;
                                left:10px;
                                top: 170px;
                                background: #000000bd;
                                color: white;
                                border: none;
                                border-radius: 15% 15% 15% 15%;
                                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                                padding: 2px;
                                position: absolute;
                                text-align: center;
                                z-index: 99998;
                            `;let n="white";1<=e&&e<=5?n="orange":5<e&&(n="red"),r.innerHTML=`
                                <h4 style="font-size: 1.2em; font-weight: bold; color: ${n};">
                                    Risk Rating  ${e} of 10
                                </h4>
                                <h4 style="font-size: 12px; font-weight: bold;">Active Bans: ${t}</h4>
                                <h4 style="font-size: 12px; font-weight: bold;">Expired Bans: ${o}</h4>
                            `,document.body.appendChild(r)}{let e={changeMapWarning:[{phrase:"Change Layer",styles:{color:"red",fontStyle:"bold",textAlign:"center",fontSize:"200pt"}},{phrase:"Set Next Layer",styles:{color:"lime",fontStyle:"bold",textAlign:"center",fontSize:"24pt"}},{phrase:"Kick",styles:{color:"orange",fontStyle:"bold",textAlign:"center",fontSize:"48pt"}},{phrase:"Warn",styles:{color:"lime",fontStyle:"bold",textAlign:"center",fontSize:"24pt"}}],orgGroup:[{phrase:"Arma",styles:{background:"#333300"}},{phrase:"Squad Mod",styles:{background:"#2b9937"}},{phrase:"Comp",styles:{background:"lime"}},{phrase:"Squad Admin",styles:{background:"#119ab7"}},{phrase:"Rust Admin",styles:{background:"#672c00"}},{phrase:"Org",styles:{background:"black"}},{phrase:"Recruiter",styles:{background:"#cc6600"}},{phrase:"Minecraft Admin",styles:{background:"#8d0cff"}},{phrase:"Squad Event",styles:{background:"#660033"}}],playerMenuDialog:[{phrase:"Warn",styles:{color:"lime"}},{phrase:"Squad List",styles:{color:"gold"}},{phrase:"Kick",styles:{color:"orange"}},{phrase:"Ban",styles:{color:"red"}},{phrase:"Force Team Change",styles:{color:"#db4dff"}},{phrase:"Remove Player from Squad",styles:{color:"#804d00"}},{phrase:"Action - Reset Squad Name",styles:{color:"gold"}}],serverCommands:[{phrase:"Warn",styles:{color:"lime"}},{phrase:"Kick",styles:{color:"orange"}},{phrase:"Ban",styles:{color:"red"}},{phrase:"Force Team Change",styles:{color:"#db4dff"}},{phrase:"Remove Player from Squad",styles:{color:"#804d00"}},{phrase:"Action - Reset Squad Name",styles:{color:"gold"}},{phrase:"Next Layer",styles:{color:"lime",fontSize:"16pt"}},{phrase:"Change Layer",styles:{color:"red",fontStyle:"bold",fontSize:"8pt"}},{phrase:"Squad List",styles:{color:"gold",fontSize:"16pt"}}]};function t(e,t){e.forEach(o=>{t.forEach(({phrase:e,styles:t})=>{o.textContent.includes(e)&&Object.assign(o.style,t)})})}setTimeout(()=>{t(document.querySelectorAll(".modal-title"),e.changeMapWarning),t(document.querySelectorAll(".css-4ey69y"),e.orgGroup),t(document.querySelectorAll(".css-f5o5h6 a, .css-f5o5h6 button"),e.playerMenuDialog),t(document.querySelectorAll(".css-1ixz43s a, .css-1ixz43s button"),e.playerMenuDialog),t(document.querySelectorAll(".css-yun63y a, .css-yun63y button"),e.serverCommands)},500)}}else var r,n,a,s,i;function l(){var e=document.createElement("button"),t=(e.id="copy-button",e.textContent="Copy Player Info",e.classList.add("copy-button-style"),document.createElement("button"));t.id="open-url-button",t.textContent="Open CBL",t.classList.add("open-url-button-style"),t.style.top="140px",document.body.appendChild(e),document.body.appendChild(t),e.addEventListener("click",()=>{var e,t;o("765","SteamID MISSING?"),o("0002",""),document.querySelector("#RCONPlayerPage > h1")?.innerText;e="",(t=document.createElement("textarea")).style.position="fixed",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}),t.addEventListener("click",()=>{var e=o("765","SteamID MISSING?");e&&"SteamID MISSING?"!==e?window.open("","_blank"):alert("SteamID is missing or invalid!")}),(e=document.createElement("style")).innerHTML=`
    .copy-button-style {
        width: 140px;
        height: 40px;
                                left:10px;
        border-radius: 1em 1em 0 0;
        background-color: #2d65a5;
        color: white;
        border: none;
        font-size: 15px;
        font-weight: bold;
        cursor: pointer;
        position: absolute;
        top: 100px;
        z-index: 99999;
        transition: background-color 0.3s, transform 0.2s;
    }
    .copy-button-style:hover {
        background-color: #0077ff;
    }
    .open-url-button-style {
        width: 140px;
        height: 25px;
                                left:10px;
        border-radius: 0 0 1em 1em;
        background-color: #e5a411;
        color: white;
        border: none;
        font-size: 15px;
        font-weight: bold;
        cursor: pointer;
        position: absolute;
        top: 120px;
        z-index: 99999;
        transition: background-color 0.3s, transform 0.2s;
    }
    .open-url-button-style:hover {
        background-color: #ffb500;
    }
`,document.head.appendChild(e)}function d(e,t){document.getElementById(e)||t()}function m(e){e=document.getElementById(e);e&&e.remove()}function p(e,o,r){e.forEach(e=>{for(var t of o)if(e.textContent.includes(t)){e.style.color=r;break}})}function f(e,o,r){e.forEach(function(t){o.forEach(function(e){new RegExp("i").test(t.textContent)&&(t.style.color=r)})})}}setInterval(async()=>{await t()},updateRate)}function observeDOMChanges(){new MutationObserver((e,t)=>{for(var o of e)if("childList"===o.type||"attributes"===o.type){var o=document.querySelector(".ReactVirtualized__Grid__innerScrollContainer"),r=document.querySelector(".navbar-brand");if(o||r){console.log("Target element detected. Starting code..."),t.disconnect(),runCode();break}}}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,test:!0})}observeDOMChanges();